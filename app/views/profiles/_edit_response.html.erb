
<% question %>
<% acceptable_responses = question.acceptable_responses.where(:user_id => current_user.id) %>
<% response = question.responses.where(:user_id => current_user.id).first %>

<form action="<%= question_update_answer_url(question.id) %>" method="post" class="edit-response-form">
  <input type="hidden" name="_method" value="PUT">
  <%= auth_token_input %>

  <% question.answer_choices.each do |answer_choice| %>
    <label>
      <input type="radio"
        name="response[answer_choice_id]"
          value="<%= answer_choice.id %>"
  <%= "checked" if (answer_choice.id.to_i == response.answer_choice_id.to_i) %>>
  <%= answer_choice.text %>
</label><br>

  <% end %>


  <br>
  What you prefer on match:
  <br>
  <% question.answer_choices.each_with_index do |answer_choice, index| %>
  <input type="checkbox" name="acceptable_response[answer_choice_ids][]" value="<%= answer_choice.id %>" <%= "checked" if acceptable_responses.any? {|a_r| a_r.answer_choice_id.to_i == answer_choice.id.to_i} %>>

  <%= answer_choice.text%>
</label>
<br>

  <% end %>

  <br>
  <br>
  Importance<br>

  <% importance = acceptable_responses.first.importance %>

  <label><input type="radio" name="all_acceptable_response[importance]" value="0" <%= "checked" if importance == 0 %>>Irrelevant</label><br>
  <label><input type="radio" name="all_acceptable_response[importance]" value="1" <%= "checked" if importance == 1 %>>A little important</label><br>
  <label><input type="radio" name="all_acceptable_response[importance]" value="10" <%= "checked" if importance == 10 %>>Important</label><br>
  <label><input type="radio" name="all_acceptable_response[importance]" value="50" <%= "checked" if importance == 50 %>>Very important</label><br>
  <label><input type="radio" name="all_acceptable_response[importance]" value="250" <%= "checked" if importance == 250 %>>Mandatory</label><br>

  <input type="submit" value="Edit your response">
  </form>